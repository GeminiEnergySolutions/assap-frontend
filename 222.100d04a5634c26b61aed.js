"use strict";(self.webpackChunkconserve=self.webpackChunkconserve||[]).push([[222],{2222:(f,u,i)=>{i.r(u),i.d(u,{SettingsModule:()=>Z});var c=i(1914),l=i(3197),g=i(8341),e=i(3852),p=i(1463),d=i(2255),m=i(4502);function v(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"h4"),e._uU(1," Logged in as "),e.TgZ(2,"b"),e._uU(3),e.qZA(),e._uU(4,". "),e.TgZ(5,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().logout()}),e._uU(6," Log out "),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Oqu(t.user.username)}}function h(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",14),e.TgZ(1,"div",2),e.TgZ(2,"label",15),e._uU(3,"Username"),e.qZA(),e.TgZ(4,"input",16),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().username=s}),e.qZA(),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"label",17),e._uU(7,"Password"),e.qZA(),e.TgZ(8,"input",18),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().password=s}),e.qZA(),e.qZA(),e.TgZ(9,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().login()}),e._uU(10," Log in "),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.username),e.xp6(4),e.Q6J("ngModel",t.password)}}const _=[{path:"",component:(()=>{class n{constructor(t,o,s){this.parseCredentialService=t,this.parseService=o,this.toastService=s}ngOnInit(){this.url=this.parseCredentialService.url,this.appId=this.parseCredentialService.appId,this.masterKey=this.parseCredentialService.masterKey,this.parseCredentialService.sessionToken&&this.parseService.getCurrentUser().subscribe(t=>this.user=t)}save(){this.parseCredentialService.url=this.url,this.parseCredentialService.appId=this.appId,this.parseCredentialService.masterKey=this.masterKey}test(){this.save(),(this.username&&this.password?this.parseService.login(this.username,this.password):this.parseService.getConfig()).subscribe(()=>{this.toastService.success("Parse Server","Successfully connected to Parse server.")},o=>{var s,r;console.error(o);const C=null!==(r=null===(s=o.error)||void 0===s?void 0:s.error)&&void 0!==r?r:{403:"Invalid credentials",404:"Invalid server URL.",0:"Can't connect to server."}[o.status];this.toastService.error("Parse Server",`Failed to connect to Parse server: ${C}`,o)})}logout(){this.parseService.logout().subscribe(()=>{delete this.user},t=>{this.toastService.error("Log out","Failed to log out",t)})}login(){this.parseService.login(this.username,this.password).subscribe(t=>{this.user=t},t=>{this.toastService.error("Log in","Failed to log in",t)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.U),e.Y36(d.X),e.Y36(m.kl))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-settings"]],decls:22,vars:5,consts:[[1,"container"],[1,"form","mb-3"],[1,"form-group"],["for","url"],["type","url","id","url",1,"form-control",3,"ngModel","ngModelChange"],["for","appId"],["type","text","id","appId",1,"form-control",3,"ngModel","ngModelChange"],["for","masterKey"],["type","password","id","masterKey","autocomplete","new-password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary","mr-2",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[4,"ngIf"],["class","form",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],[1,"form"],["for","username"],["type","text","id","username","autocomplete","username",1,"form-control",3,"ngModel","ngModelChange"],["for","password"],["type","password","id","password","autocomplete","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1"),e._uU(2,"Settings"),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"div",2),e.TgZ(5,"label",3),e._uU(6,"Parse Server URL"),e.qZA(),e.TgZ(7,"input",4),e.NdJ("ngModelChange",function(r){return o.url=r}),e.qZA(),e.qZA(),e.TgZ(8,"div",2),e.TgZ(9,"label",5),e._uU(10,"Parse App ID"),e.qZA(),e.TgZ(11,"input",6),e.NdJ("ngModelChange",function(r){return o.appId=r}),e.qZA(),e.qZA(),e.TgZ(12,"div",2),e.TgZ(13,"label",7),e._uU(14,"Parse Master Key (Optional)"),e.qZA(),e.TgZ(15,"input",8),e.NdJ("ngModelChange",function(r){return o.masterKey=r}),e.qZA(),e.qZA(),e.TgZ(16,"button",9),e.NdJ("click",function(){return o.save()}),e._uU(17," Save "),e.qZA(),e.TgZ(18,"button",10),e.NdJ("click",function(){return o.test()}),e._uU(19," Test "),e.qZA(),e.qZA(),e.YNc(20,v,7,1,"h4",11),e.YNc(21,h,11,2,"div",12),e.qZA()),2&t&&(e.xp6(7),e.Q6J("ngModel",o.url),e.xp6(4),e.Q6J("ngModel",o.appId),e.xp6(4),e.Q6J("ngModel",o.masterKey),e.xp6(5),e.Q6J("ngIf",o.user),e.xp6(1),e.Q6J("ngIf",!o.user))},directives:[l.Fj,l.JJ,l.On,c.O5],styles:[""]}),n})()}];let S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.Bz.forChild(_)],g.Bz]}),n})(),Z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[c.ez,l.u5,S]]}),n})()}}]);