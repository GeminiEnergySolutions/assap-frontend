<app-master-detail>
  <nav breadcrumb aria-label="breadcrumb">
    <ol class="breadcrumb p-3 bg-dark-subtle">
      <li class="breadcrumb-item active" aria-current="page">Audits</li>
    </ol>
  </nav>
  <div list class="list-group rounded-0">
    <button class="list-group-item list-group-item-action text-primary" (click)="create()">
      New Audit
    </button>
    @for (audit of audits; track audit.auditId) {
      <a class="list-group-item list-group-item-action d-flex align-items-center"
         [routerLink]="[audit.auditId]" routerLinkActive="active text-white">
        <div class="flex-grow-1">
          {{ audit.auditName | titlecase }}
          @if (authService.currentLoginUser.role === 'superAdmin' && audit.user.role.role !== 'superAdmin') {
            ({{ audit.user.userName | titlecase }})
          }
        </div>
        <app-option-dropdown class="visible-hover">
          <button ngbDropdownItem class="text-primary" (click)="rename(audit)">Rename</button>
          <div class="dropdown-divider"></div>
          @if ((authService.currentLoginUser.role === 'admin' || authService.currentLoginUser.role === 'superAdmin') && audit.user.role.role !== 'guest') {
            <button ngbDropdownItem class="text-primary" (click)="openAddDataCollectorModal(audit)">
              Add DataCollector
            </button>
            <div class="dropdown-divider"></div>
          }
          @if (authService.currentLoginUser.role !== 'dataCollector' || (audit.user.role.role !== 'admin' && audit.user.role.role !== 'superAdmin')) {
            <button ngbDropdownItem class="text-danger" (click)="delete(audit)">
              Delete
            </button>
          }
        </app-option-dropdown>
      </a>
    }
  </div>
</app-master-detail>
