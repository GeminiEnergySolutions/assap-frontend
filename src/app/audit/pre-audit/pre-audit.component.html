<app-master-detail>
  <nav breadcrumb aria-label="breadcrumb">
    <ol class="breadcrumb p-3 bg-dark-subtle">
      <li class="breadcrumb-item active" aria-current="page">Audits</li>
    </ol>
  </nav>
  <div list class="list-group rounded-0">

    <button class="list-group-item list-group-item-action text-primary" (click)="create()">
      New Audit
    </button>
    <a *ngFor="let audit of audits" class="list-group-item list-group-item-action d-flex align-items-center"
      [routerLink]="[audit.auditId]" routerLinkActive="active text-white">

      <div class="flex-grow-1">
        {{audit.auditName | titlecase}}
        <div *ngIf="authService.currentLoginUser.role === 'superAdmin' && audit.user.role.role !== 'superAdmin'" >
          ({{audit.user.userName | titlecase}})
        </div>
        <i *ngIf="audit.pendingChanges !== undefined" class="bi-wifi-off" ngbTooltip="Available Offline"></i>
      </div>

      <app-option-dropdown class="visible-hover" [id]="audit.auditId">
        <button ngbDropdownItem class="text-primary" (click)="rename(audit)">Rename</button>
        <div class="dropdown-divider"></div>
        <div *ngIf="(authService.currentLoginUser.role === 'admin' || authService.currentLoginUser.role === 'superAdmin') && audit.user.role.role !== 'guest'">
          <button ngbDropdownItem class="text-primary" (click)="openAddDataCollectorModal(audit)">
            Add DataCollector
          </button>
          <div class="dropdown-divider"></div>
        </div>
        <button ngbDropdownItem class="text-danger" (click)="delete(audit)"
                *ngIf="authService.currentLoginUser.role !== 'dataCollector' || (audit.user.role.role !== 'admin' && audit.user.role.role !== 'superAdmin')">
          Delete
        </button>
      </app-option-dropdown>
    </a>
  </div>
</app-master-detail>
