{"version":3,"file":"src_app_audits_audits_module_ts.js","mappings":"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","sources":["./src/app/audits/access-control/access-control.component.ts","./src/app/audits/access-control/access-control.component.html","./src/app/audits/audit.service.ts","./src/app/audits/audit/audit.component.ts","./src/app/audits/audit/audit.component.html","./src/app/audits/audits-routing.module.ts","./src/app/audits/audits.module.ts","./src/app/audits/feature.service.ts","./src/app/audits/id.service.ts","./src/app/audits/model/types.ts","./src/app/audits/offline-audit.service.ts","./src/app/audits/offline-feature.service.ts","./src/app/audits/parse-audit.service.ts","./src/app/audits/parse-feature.service.ts","./src/app/audits/photos/photos.component.ts","./src/app/audits/photos/photos.component.html","./src/app/audits/pre-audit/pre-audit.component.ts","./src/app/audits/pre-audit/pre-audit.component.html","./src/app/audits/pre-type/pre-type.component.ts","./src/app/audits/pre-type/pre-type.component.html","./src/app/audits/pre-zone/pre-zone.component.ts","./src/app/audits/pre-zone/pre-zone.component.html","./src/app/audits/type-list/type-list.component.ts","./src/app/audits/type-list/type-list.component.html","./src/app/audits/type.service.ts","./src/app/audits/type/type.component.ts","./src/app/audits/type/type.component.html","./src/app/audits/zone-list/zone-list.component.ts","./src/app/audits/zone-list/zone-list.component.html","./src/app/audits/zone.service.ts","./src/app/audits/zone/zone.component.ts","./src/app/audits/zone/zone.component.html","./src/app/forms/form-input-type.pipe.ts","./src/app/forms/form/form.component.ts","./src/app/forms/form/form.component.html","./src/app/forms/forms.module.ts","./src/app/forms/forms.service.ts","./src/app/shared/master-detail/master-detail.component.ts","./src/app/shared/master-detail/master-detail.component.html","./src/app/shared/options-dropdown/options-dropdown.component.ts","./src/app/shared/options-dropdown/options-dropdown.component.html","./src/app/shared/safe.pipe.ts","./src/app/shared/shared.module.ts","./src/app/unsaved-changes.guard.ts","./node_modules/rxjs/dist/esm/internal/operators/debounceTime.js"],"sourcesContent":["import {Component, Input, OnChanges, OnInit, SimpleChanges} from '@angular/core';\nimport {ToastService} from 'ng-bootstrap-ext';\nimport {forkJoin, Observable, OperatorFunction} from 'rxjs';\nimport {debounceTime, distinctUntilChanged, map} from 'rxjs/operators';\nimport {ACL} from '../../parse/parse-object.interface';\nimport {ParseService} from '../../parse/parse.service';\nimport {User} from '../../parse/user.interface';\nimport {AuditService} from '../audit.service';\nimport {FeatureService} from '../feature.service';\nimport {Audit} from '../model/audit.interface';\n\n@Component({\n  selector: 'app-access-control',\n  templateUrl: './access-control.component.html',\n  styleUrls: ['./access-control.component.scss'],\n})\nexport class AccessControlComponent implements OnInit, OnChanges {\n  @Input() audit!: Audit;\n\n  user?: User;\n\n  acl: { key: string; read: boolean; write: boolean; }[] = [];\n\n  userIdToName: Record<string, string> = {};\n  userNameToId: Record<string, string> = {};\n\n  typeahead: OperatorFunction<string, readonly string[]> = (text$: Observable<string>) => text$.pipe(\n    debounceTime(200),\n    distinctUntilChanged(),\n    map(term => {\n      if (term.length < 2) {\n        return [];\n      }\n      const lowerTerm = term.toLowerCase();\n      return Object.keys(this.userNameToId).filter(v => v.toLowerCase().includes(lowerTerm)).slice(0, 10);\n    }),\n  );\n\n  constructor(\n    private featureService: FeatureService,\n    private auditService: AuditService,\n    private parseService: ParseService,\n    private toastService: ToastService,\n  ) {\n  }\n\n  ngOnInit() {\n    this.parseService.getCurrentUser().subscribe(user => this.user = user);\n\n    this.parseService.getUsers().subscribe(users => {\n      for (let user of users) {\n        this.userIdToName[user.objectId] = user.username;\n        this.userNameToId[user.username] = user.objectId;\n      }\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.audit) {\n      this.acl = Object.entries(this.audit.ACL ?? {'*': {read: true, write: true}})\n        .map(([key, rest]) => ({key, ...rest}))\n        .sort(({key: k1}, {key: k2}) => k1.localeCompare(k2))\n      ;\n    }\n  }\n\n  delete(index: number) {\n    this.acl.splice(index, 1);\n  }\n\n  add(key: string, read: boolean, write: boolean) {\n    key = this.userNameToId[key] || key;\n    this.acl.push({key, read, write});\n  }\n\n  save() {\n    const ACL: ACL = {};\n    for (const {key, ...rest} of this.acl) {\n      ACL[key] = rest;\n    }\n\n    // prevent current user from removing their own write access\n    if (this.user && !(ACL[this.user.objectId]?.write || ACL['*']?.write) && !confirm('The current settings would remove your write access. Are you sure you want to save?')) {\n      return;\n    }\n\n    forkJoin([\n      this.auditService.update(this.audit, {ACL}, a => {\n        a.ACL = ACL;\n        return a;\n      }),\n      this.featureService.updateAll({auditId: this.audit.auditId}, {ACL}),\n    ]).subscribe(() => {\n      this.toastService.success('Access Control', 'Successfully saved access control');\n    }, error => {\n      this.toastService.error('Access Control', 'Failed to update access control', error);\n    });\n  }\n}\n","<table class=\"table table-sm table-striped\">\n  <thead>\n  <tr>\n    <th>User or Role</th>\n    <th>Can Read?</th>\n    <th>Can Write?</th>\n    <th>Actions</th>\n  </tr>\n  </thead>\n  <tbody>\n  <tr *ngFor=\"let entry of acl; let index = index\">\n    <td>\n      {{userIdToName[entry.key] || entry.key}}\n    </td>\n    <td>\n      <input type=\"checkbox\" class=\"form-check-input\" [(ngModel)]=\"entry.read\">\n    </td>\n    <td>\n      <input type=\"checkbox\" class=\"form-check-input\" [(ngModel)]=\"entry.write\">\n    </td>\n    <td>\n      <button type=\"button\" class=\"btn btn-danger\" (click)=\"delete(index)\">\n        <i class=\"bi-trash\"></i>\n      </button>\n    </td>\n  </tr>\n  </tbody>\n  <tfoot>\n  <tr>\n    <td>\n      <input\n        #keyInput\n        type=\"text\"\n        class=\"form-control\"\n        placeholder=\"User Name or ID or role:Rolename or *\"\n        [ngbTypeahead]=\"typeahead\"\n      >\n    </td>\n    <td>\n      <input type=\"checkbox\" class=\"form-check-input\" #readCheck>\n    </td>\n    <td>\n      <input type=\"checkbox\" class=\"form-check-input\" #writeCheck>\n    </td>\n    <td>\n      <button type=\"button\" class=\"btn btn-success\" (click)=\"this.add(keyInput.value, readCheck.checked, writeCheck.checked)\">\n        <i class=\"bi-plus-circle\"></i>\n      </button>\n    </td>\n  </tr>\n  </tfoot>\n</table>\n<button class=\"btn btn-primary\" (click)=\"save()\">\n  Save\n</button>\n","import {Injectable} from '@angular/core';\nimport {Observable, of} from 'rxjs';\nimport {catchError, map, mapTo, tap} from 'rxjs/operators';\nimport {Audit, CreateAuditDto, UpdateAuditDto} from './model/audit.interface';\nimport {OfflineAuditService} from './offline-audit.service';\nimport {ParseAuditService} from './parse-audit.service';\n\n@Injectable()\nexport class AuditService {\n\n  constructor(\n    private offlineAuditService: OfflineAuditService,\n    private parseAuditService: ParseAuditService,\n  ) {\n  }\n\n  findAll(filter: Partial<Audit> = {}): Observable<Audit[]> {\n    const offlineAudits = this.offlineAuditService.findAll(filter);\n    return this.parseAuditService.findAll(filter).pipe(\n      catchError(() => of([])),\n      map(parseAudits => this.mergeAll([...parseAudits, ...offlineAudits])),\n    );\n  }\n\n  findOne(auditId: string): Observable<Audit | undefined> {\n    const offlineAudit = this.offlineAuditService.findOne(auditId);\n    return this.parseAuditService.findAll({auditId}).pipe(\n      catchError(() => of([])),\n      map(parseAudits => this.mergeAll(offlineAudit ? [...parseAudits, offlineAudit] : parseAudits)),\n      map(audits => audits[0]),\n    );\n  }\n\n  private mergeAll(audits: Audit[]): Audit[] {\n    if (audits.length <= 1) {\n      return audits;\n    }\n\n    const auditIds = new Map<string, Audit>();\n\n    for (const audit of audits) {\n      const auditId = audit.auditId;\n      const existing = auditIds.get(auditId);\n      if (!existing) {\n        auditIds.set(auditId, audit);\n        continue;\n      }\n\n      let merged: Audit;\n      // in case of conflict, prefer newest\n      if (existing.updatedAt <= audit.updatedAt) {\n        merged = this.merge(existing, audit);\n      } else {\n        merged = this.merge(audit, existing);\n      }\n      auditIds.set(auditId, merged);\n    }\n\n    return [...auditIds.values()];\n  }\n\n  private merge(a1: Audit, a2: Audit): Audit {\n    return {\n      ...a1,\n      ...a2,\n      type: {...a1.type, ...a2.type},\n      zone: {...a1.zone, ...a2.zone},\n    };\n  }\n\n  create(dto: CreateAuditDto): Observable<Audit> {\n    return this.parseAuditService.create(dto).pipe(catchError(() => {\n      return of(this.offlineAuditService.create(dto));\n    }));\n  }\n\n  update(audit: Audit, delta: UpdateAuditDto, apply: (a: Audit) => Audit): Observable<Audit> {\n    const offline = this.offlineAuditService.update(audit, delta, apply);\n    if (offline) {\n      return of(offline);\n    }\n    return this.parseAuditService.update(audit.objectId, delta).pipe(mapTo(audit), map(apply));\n  }\n\n  upload(audit: Audit): Observable<void> {\n    if (audit.objectId.startsWith('local.')) {\n      const {objectId, updatedAt, createdAt, pendingChanges, ...rest} = audit;\n      return this.parseAuditService.createFromLocal(rest).pipe(\n        tap(created => this.offlineAuditService.save(created)),\n        mapTo(undefined),\n      );\n    }\n\n    const deltas = this.offlineAuditService.getDeltas(audit.auditId);\n    return this.parseAuditService.updateMany(audit.objectId, deltas).pipe(\n      tap(() => this.offlineAuditService.deleteDeltas(audit)),\n    );\n  }\n\n  delete(audit: Pick<Audit, 'objectId' | 'auditId'>): Observable<void> {\n    // FIXME delete does not work in offline mode\n    return this.parseAuditService.delete(audit);\n  }\n}\n","import {Component, OnInit, ViewChild} from '@angular/core';\nimport {ActivatedRoute} from '@angular/router';\nimport {ToastService} from 'ng-bootstrap-ext';\nimport {forkJoin, Observable} from 'rxjs';\nimport {switchMap} from 'rxjs/operators';\nimport {FormComponent} from '../../forms/form/form.component';\nimport {Schema} from '../../forms/forms.interface';\nimport {SaveableChangesComponent} from '../../unsaved-changes.guard';\nimport {AuditService} from '../audit.service';\nimport {FeatureService} from '../feature.service';\nimport {Audit} from '../model/audit.interface';\nimport {Feature, FeatureData} from '../model/feature.interface';\n\n@Component({\n  selector: 'app-audit',\n  templateUrl: './audit.component.html',\n  styleUrls: ['./audit.component.scss'],\n})\nexport class AuditComponent implements OnInit, SaveableChangesComponent {\n  @ViewChild('form', {static: false}) form?: FormComponent;\n\n  selectedAudit?: Audit;\n  feature?: Feature;\n  data: FeatureData = {};\n  activeTab: 'preaudit' | 'zone' = 'preaudit';\n\n  constructor(\n    private auditService: AuditService,\n    private featureService: FeatureService,\n    private toastService: ToastService,\n    private route: ActivatedRoute,\n  ) {\n  }\n\n  ngOnInit(): void {\n    this.route.params.pipe(\n      switchMap(({aid}) => forkJoin([\n        this.auditService.findOne(aid),\n        this.featureService.findAll({auditId: aid, belongsTo: 'preaudit'}),\n      ])),\n    ).subscribe(([audit, features]) => {\n      this.selectedAudit = audit;\n      this.feature = features[0];\n      this.data = features[0] ? this.featureService.feature2Data(features[0]) : {};\n    });\n  }\n\n  isSaved(): boolean {\n    return !this.form?.dirty;\n  }\n\n  save(schema: Schema, data: object) {\n    if (!this.selectedAudit) {\n      return;\n    }\n\n    let op: Observable<Feature>;\n    if (this.feature) {\n      const update = this.featureService.data2Feature(schema, data);\n      op = this.featureService.update(this.feature, update);\n    } else {\n      const feature = this.featureService.data2Feature(schema, data);\n      const {auditId, ACL} = this.selectedAudit;\n      op = this.featureService.create({\n        auditId,\n        belongsTo: 'preaudit',\n        mod: new Date().valueOf().toString(),\n        zoneId: null,\n        typeId: null,\n        usn: 0,\n        ACL,\n        ...feature,\n      });\n    }\n\n    op.subscribe(feature => {\n      this.feature = feature;\n      this.toastService.success('Form', 'Successfully saved form input');\n    }, error => {\n      this.toastService.error('Form', 'Failed to save form input', error);\n    });\n  }\n}\n","<div class=\"container\">\n  <h1>\n    <a class=\"bi-chevron-left d-lg-none\" routerLink=\"..\"></a>\n    {{ selectedAudit?.name }}\n  </h1>\n\n  <ul ngbNav #nav=\"ngbNav\" [(activeId)]=\"activeTab\" class=\"nav-tabs\">\n    <li ngbNavItem=\"preaudit\">\n      <a ngbNavLink>Preaudit</a>\n      <ng-template ngbNavContent>\n        <div class=\"container\">\n          <app-form #form *ngIf=\"selectedAudit\" schemaId=\"preaudit\" [data]=\"data\" (saved)=\"save($event[0], $event[1])\"></app-form>\n        </div>\n      </ng-template>\n    </li>\n    <li ngbNavItem=\"zone\">\n      <a ngbNavLink>Zone</a>\n      <ng-template ngbNavContent>\n        <app-zone-list *ngIf=\"selectedAudit\" [audit]=\"selectedAudit\" routerPrefix=\"zones/\"></app-zone-list>\n      </ng-template>\n    </li>\n    <li ngbNavItem=\"photos\">\n      <a ngbNavLink>Photos</a>\n      <ng-template ngbNavContent>\n        <app-photos></app-photos>\n      </ng-template>\n    </li>\n    <li ngbNavItem=\"access\">\n      <a ngbNavLink>Access Control</a>\n      <ng-template ngbNavContent>\n        <app-access-control *ngIf=\"selectedAudit\" [audit]=\"selectedAudit\"></app-access-control>\n      </ng-template>\n    </li>\n  </ul>\n\n  <div [ngbNavOutlet]=\"nav\" class=\"mt-2\"></div>\n</div>\n","import {NgModule} from '@angular/core';\nimport {RouterModule, Routes} from '@angular/router';\nimport {UnsavedChangesGuard} from '../unsaved-changes.guard';\nimport {AuditComponent} from './audit/audit.component';\nimport {PreAuditComponent} from './pre-audit/pre-audit.component';\nimport {PreTypeComponent} from './pre-type/pre-type.component';\nimport {PreZoneComponent} from './pre-zone/pre-zone.component';\nimport {TypeComponent} from './type/type.component';\nimport {ZoneComponent} from './zone/zone.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PreAuditComponent,\n    children: [\n      {path: ':aid', component: AuditComponent, canDeactivate: [UnsavedChangesGuard]},\n    ],\n  },\n  {\n    path: ':aid/zones',\n    component: PreZoneComponent,\n    children: [\n      {path: ':zid', component: ZoneComponent},\n    ],\n  },\n  {\n    path: ':aid/zones/:zid/:type',\n    component: PreTypeComponent,\n    children: [\n      {path: ':tid', component: TypeComponent, canDeactivate: [UnsavedChangesGuard]},\n    ],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AuditsRoutingModule {\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {FormsModule} from '@angular/forms';\nimport {NgbDropdownModule, NgbNavModule, NgbTooltipModule, NgbTypeaheadModule} from '@ng-bootstrap/ng-bootstrap';\nimport {CompanycamModule} from '../companycam/companycam.module';\nimport {FormsModule as AppFormsModule} from '../forms/forms.module';\nimport {SharedModule} from '../shared/shared.module';\nimport {AccessControlComponent} from './access-control/access-control.component';\nimport {AuditService} from './audit.service';\nimport {AuditComponent} from './audit/audit.component';\n\nimport {AuditsRoutingModule} from './audits-routing.module';\nimport {FeatureService} from './feature.service';\nimport {IdService} from './id.service';\nimport {OfflineAuditService} from './offline-audit.service';\nimport {OfflineFeatureService} from './offline-feature.service';\nimport {ParseAuditService} from './parse-audit.service';\nimport {ParseFeatureService} from './parse-feature.service';\nimport {PhotosComponent} from './photos/photos.component';\nimport {PreAuditComponent} from './pre-audit/pre-audit.component';\nimport {PreTypeComponent} from './pre-type/pre-type.component';\nimport {PreZoneComponent} from './pre-zone/pre-zone.component';\nimport {TypeListComponent} from './type-list/type-list.component';\nimport {TypeService} from './type.service';\nimport {TypeComponent} from './type/type.component';\nimport {ZoneListComponent} from './zone-list/zone-list.component';\nimport {ZoneService} from './zone.service';\nimport {ZoneComponent} from './zone/zone.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    SharedModule,\n    FormsModule,\n    NgbNavModule,\n    NgbDropdownModule,\n    AuditsRoutingModule,\n    NgbTooltipModule,\n    FormsModule,\n    AppFormsModule,\n    NgbTypeaheadModule,\n    CompanycamModule,\n  ],\n  providers: [\n    IdService,\n    AuditService,\n    OfflineAuditService,\n    ParseAuditService,\n    ZoneService,\n    TypeService,\n    FeatureService,\n    OfflineFeatureService,\n    ParseFeatureService,\n  ],\n  declarations: [\n    PreAuditComponent,\n    ZoneComponent,\n    TypeComponent,\n    AuditComponent,\n    PreZoneComponent,\n    PreTypeComponent,\n    ZoneListComponent,\n    TypeListComponent,\n    AccessControlComponent,\n    PhotosComponent,\n  ],\n})\nexport class AuditsModule {\n}\n","import {Injectable} from '@angular/core';\nimport {Data} from '@angular/router';\nimport {Observable, of} from 'rxjs';\nimport {map, mapTo} from 'rxjs/operators';\nimport {Element, Schema} from '../forms/forms.interface';\nimport {ParseService} from '../parse/parse.service';\nimport {IdService} from './id.service';\nimport {CreateFeatureDto, Feature, FeatureData} from './model/feature.interface';\nimport {OfflineAuditService} from './offline-audit.service';\nimport {OfflineFeatureService} from './offline-feature.service';\nimport {ParseFeatureService} from './parse-feature.service';\n\nconst RECORD_SEPARATOR = '\\u001F';\n\n@Injectable()\nexport class FeatureService {\n\n  constructor(\n    private parseService: ParseService,\n    private parseFeatureService: ParseFeatureService,\n    private offlineFeatureService: OfflineFeatureService,\n    private offlineAuditService: OfflineAuditService,\n    private idService: IdService,\n  ) {\n  }\n\n  findAll<K extends keyof Feature = keyof Feature>(filter: Partial<Feature> = {}, keys?: readonly K[]): Observable<Pick<Feature, K>[]> {\n    const offline = this.offlineFeatureService.findAll(filter);\n    if (offline.length) {\n      return of(offline);\n    }\n    return this.parseFeatureService.findAll<K>(filter, keys);\n  }\n\n  saveAll(filter: Partial<Feature>) {\n    this.parseFeatureService.findAll(filter).subscribe(features => {\n      for (const feature of features) {\n        this.offlineFeatureService.save(feature);\n      }\n    });\n  }\n\n  create(feature: CreateFeatureDto): Observable<Feature> {\n    if (this.offlineAuditService.findOne(feature.auditId)) {\n      const objectId = this.idService.randomObjectId();\n      const timestamp = new Date().toISOString();\n      const result: Feature = {\n        objectId,\n        createdAt: timestamp,\n        updatedAt: timestamp,\n        ...feature,\n      };\n      this.offlineFeatureService.save(result);\n      return of(result);\n    }\n    return this.parseFeatureService.create(feature);\n  }\n\n  update(feature: Feature, delta: Partial<Feature>): Observable<Feature> {\n    const offline = this.offlineFeatureService.update(feature, delta);\n    if (offline) {\n      return of(offline);\n    }\n    return this.parseFeatureService.update(feature.objectId, delta).pipe(mapTo({...feature, ...delta}));\n  }\n\n  updateAll(filter: Partial<Feature>, update: Partial<Feature>) {\n    const offline = this.offlineFeatureService.findAll(filter);\n    if (offline.length) {\n      for (let feature of offline) {\n        this.offlineFeatureService.update(feature, update);\n      }\n      return of([]);\n    }\n    return this.parseFeatureService.updateAll(filter, update);\n  }\n\n  upload(filter: Partial<Feature>): Observable<void> {\n    const features = this.offlineFeatureService.findAll(filter);\n    return this.parseService.batch(features.map(f => {\n      const {objectId, createdAt, updatedAt, ...body} = f;\n      if (objectId.startsWith('local.')) {\n        return {\n          path: '/parse/classes/rFeature',\n          method: 'POST',\n          body,\n        };\n      } else {\n        return {\n          path: `/parse/classes/rFeature/${objectId}`,\n          method: 'PUT',\n          body,\n        };\n      }\n    })).pipe(map(results => {\n      for (let i = 0; i < results.length; i++) {\n        const result = results[i];\n        const feature = features[i];\n        if ('error' in result) {\n          continue;\n        }\n\n        const success = result.success;\n        if ('objectId' in success) {\n          feature.objectId = success.objectId;\n        }\n        if ('createdAt' in success) {\n          feature.createdAt = success.createdAt;\n        }\n        if ('updatedAt' in success) {\n          feature.updatedAt = success.updatedAt;\n        }\n\n        this.offlineFeatureService.save(feature);\n      }\n      return undefined;\n    }));\n  }\n\n  delete(feature: Feature): Observable<void> {\n    // FIXME delete does not work in offline mode\n    return this.parseFeatureService.delete(feature.objectId);\n  }\n\n  deleteAll(filter: Partial<Feature> = {}) {\n    // FIXME deleteAll does not work in offline mode\n    return this.parseFeatureService.deleteAll(filter);\n  }\n\n  feature2Data(feature: Feature): FeatureData {\n    const data: Record<string, string> = {};\n    const formIds = feature.formId.split(RECORD_SEPARATOR);\n    const values = feature.values.split(RECORD_SEPARATOR);\n    const length = Math.min(formIds.length, values.length);\n\n    for (let i = 0; i < length; i++) {\n      data[formIds[i]] = values[i];\n    }\n\n    return data;\n  }\n\n  data2Feature(schema: Schema, data: Data): Pick<Feature, 'dataType' | 'fields' | 'formId' | 'values'> {\n    const entries = Object.entries(data);\n    const keys = entries.map(([key]) => key);\n    const elements = keys.map(k => this.findElement(schema, k));\n    return {\n      dataType: elements.map(e => e?.dataType ?? '').join(RECORD_SEPARATOR),\n      fields: elements.map(e => e?.param ?? '').join(RECORD_SEPARATOR),\n      formId: keys.join(RECORD_SEPARATOR),\n      values: entries.map(e => e[1]).join(RECORD_SEPARATOR),\n    };\n  }\n\n  private findElement(schema: Schema, id: string): Element | undefined {\n    for (let section of schema.geminiForm) {\n      for (let element of section.elements) {\n        if (element.id === id) {\n          return element;\n        }\n      }\n    }\n    return undefined;\n  }\n}\n","import {Injectable} from '@angular/core';\n\n@Injectable()\nexport class IdService {\n  constructor() {\n  }\n\n  randomIdAndMod() {\n    const mod = new Date().valueOf();\n    const id = (mod / 1000) | 0;\n    return {id, mod};\n  }\n\n  randomObjectId() {\n    return (parseInt('local', 36) + Math.random()).toString(36);\n  }\n}\n","export interface ApplianceType {\n  id: string;\n  name: string;\n  subTypes?: ApplianceType[];\n}\n\nexport const RefrigerationTypes: ApplianceType[] = [\n  {id: 'walkin_refrigerator', name: 'Walk-In Refrigerator'},\n  {id: 'walkin_freezer', name: 'Walk-In Freezer'},\n  {id: 'refrigerator', name: 'Refrigerator'},\n  {id: 'freezer', name: 'Freezer'},\n  {id: 'walkin_coolbot', name: 'Walk-In Cooler Box'}, // [sic]\n];\n\nexport const PlugloadApplianceTypes: ApplianceType[] = [\n  {id: 'combination_oven', name: 'Combination Oven'},\n  {id: 'convection_oven', name: 'Convection Oven'},\n  {id: 'conveyor_oven', name: 'Conveyor Oven'},\n  {id: 'fryer', name: 'Fryer'},\n  {id: 'icemaker', name: 'Ice Maker'},\n  {id: 'rack_oven', name: 'Rack Oven'},\n  {id: 'steam_cooker', name: 'Steam Cooker'},\n  {id: 'griddle', name: 'Griddle'},\n  {id: 'hot_food_cabinet', name: 'Hot Food Cabinet'},\n  {id: 'conveyor_broiler', name: 'Conveyor Broiler'},\n  {id: 'dishwasher', name: 'Dish Washer'},\n  {id: 'pre_rinse_spray', name: 'Pre Rinse Spray'},\n  {id: 'sample_appliance', name: 'Sample Appliance'},\n];\n\nexport const LightingTypes: ApplianceType[] = [\n  {id: 'halogen', name: 'Halogen'},\n  {id: 'cfl', name: 'CFL'},\n  {id: 'linearfluorescent', name: 'Linear Fluorescent'},\n  {id: 'incandescent', name: 'Incandescent'},\n  {id: 'hpsodium', name: 'High Pressure Sodium'},\n  {id: 'lpsodium', name: 'Low Pressure Sodium'},\n];\n\nexport const Types: ApplianceType[] = [\n  {id: 'plugload', name: 'Plugload', subTypes: PlugloadApplianceTypes},\n  {id: 'hvac', name: 'HVAC'},\n  {id: 'hotwater', name: 'WaterHeater'},\n  {id: 'refrigeration', name: 'Refrigeration', subTypes: RefrigerationTypes},\n  {id: 'lighting', name: 'Lighting', subTypes: LightingTypes},\n  {id: 'motors', name: 'Motors'},\n  {id: 'others', name: 'Others'},\n];\n","import {Injectable} from '@angular/core';\nimport {ParseObject} from '../parse/parse-object.interface';\nimport {IdService} from './id.service';\nimport {Audit, CreateAuditDto, UpdateAuditDto} from './model/audit.interface';\n\n@Injectable()\nexport class OfflineAuditService {\n\n  constructor(\n    private idService: IdService,\n  ) {\n  }\n\n  findAll(filter?: Partial<Audit>): Audit[] {\n    const result: Audit[] = [];\n\n    outer: for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (!key || !key.startsWith('audits/') || key.indexOf('/', 'audits/'.length) >= 0) {\n        continue;\n      }\n\n      const value = localStorage.getItem(key);\n      if (!value) {\n        continue;\n      }\n\n      const audit = JSON.parse(value);\n\n      if (filter) {\n        for (const [filterKey, filterValue] of Object.entries(filter)) {\n          if (audit[filterKey] !== filterValue) {\n            continue outer;\n          }\n        }\n      }\n\n      result.push(audit);\n    }\n\n    return result;\n  }\n\n  findOne(auditId: string): Audit | undefined {\n    const value = localStorage.getItem(`audits/${auditId}`);\n    if (!value) {\n      return undefined;\n    }\n\n    return JSON.parse(value);\n  }\n\n  getDeltas(auditId: string): Partial<Audit>[] {\n    const deltas: Record<string, Partial<Audit>> = {};\n\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (!key) {\n        continue;\n      }\n\n      const match = new RegExp(`^audits/${auditId}/delta/(\\d+)$`).exec(key);\n      if (!match) {\n        continue;\n      }\n\n      const [, timestamp] = match;\n      const value = localStorage.getItem(key);\n      if (!value) {\n        continue;\n      }\n\n      deltas[timestamp] = JSON.parse(value);\n    }\n\n    return Object.entries(deltas)\n      .sort((a, b) => +a[0] - +b[0])\n      .map(([, delta]) => delta)\n      ;\n  }\n\n  save(audit: Audit): void {\n    this.deleteDeltas(audit);\n    localStorage.setItem(`audits/${audit.auditId}`, JSON.stringify(audit));\n  }\n\n  create(dto: CreateAuditDto): Audit {\n    const {id, mod} = this.idService.randomIdAndMod();\n    const timestamp = new Date().toISOString();\n    const audit: Audit = {\n      ...dto,\n      objectId: this.idService.randomObjectId(),\n      createdAt: timestamp,\n      updatedAt: timestamp,\n      auditId: id.toString(),\n      mod: mod.toString(),\n      usn: 0,\n      pendingChanges: 1,\n    };\n    localStorage.setItem(`audits/${id}`, JSON.stringify(audit));\n    return audit;\n  }\n\n  update(audit: Audit, delta?: UpdateAuditDto, apply?: (a: Audit) => Audit): Audit | undefined {\n    const key = `audits/${audit.auditId}`;\n    const value = localStorage.getItem(key);\n    if (!value) {\n      // not saved offline\n      return undefined;\n    }\n\n    const applied = apply ? apply(audit) : audit;\n    applied.pendingChanges = (applied.pendingChanges || 0) + (delta ? 1 : 0);\n    localStorage.setItem(key, JSON.stringify(applied));\n\n    if (delta && !applied.objectId.startsWith('local.')) {\n      const deltaKey = `audits/${applied.auditId}/delta/${+new Date()}`;\n      localStorage.setItem(deltaKey, JSON.stringify(delta));\n    }\n\n    return applied;\n  }\n\n  deleteDeltas(audit: Pick<Audit, 'auditId' | 'pendingChanges'>): void {\n    this.deleteWithPrefix(`audits/${audit.auditId}/delta`);\n    audit.pendingChanges = 0;\n  }\n\n  delete(audit: Pick<Audit, 'auditId' | 'pendingChanges'>): void {\n    this.deleteWithPrefix(`audits/${audit.auditId}`);\n    delete audit.pendingChanges;\n  }\n\n  private deleteWithPrefix(prefix: string): void {\n    for (let i = localStorage.length - 1; i >= 0; i--) {\n      const key = localStorage.key(i);\n      if (key && key.startsWith(prefix)) {\n        localStorage.removeItem(key);\n      }\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {Feature} from './model/feature.interface';\n\n@Injectable()\nexport class OfflineFeatureService {\n\n  constructor() { }\n\n  findAll(filter: Partial<Feature>): Feature[] {\n    if (filter.auditId && !filter.typeId) {\n      const key = `audits/${filter.auditId}/features/preaudit`;\n      const value = localStorage.getItem(key);\n      return value ? [JSON.parse(value)] : [];\n    }\n\n    const pattern = new RegExp(`^audits/${filter.auditId || '\\\\w+'}/features/${filter.typeId || 'preaudit'}$`);\n    const result: Feature[] = [];\n    outer: for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (!key || !pattern.test(key)) {\n        continue;\n      }\n\n      const value = localStorage.getItem(key);\n      if (!value) {\n        continue;\n      }\n\n      const feature = JSON.parse(value);\n      for (const [filterKey, filterValue] of Object.entries(filter)) {\n        if (feature[filterKey] !== filterValue) {\n          continue outer;\n        }\n      }\n\n      result.push(feature);\n    }\n\n    return result;\n  }\n\n  save(feature: Feature) {\n    const key = this.getKey(feature);\n    localStorage.setItem(key, JSON.stringify(feature));\n  }\n\n  update(feature: Feature, delta: Partial<Feature>): Feature | undefined {\n    const key = this.getKey(feature);\n    if (!localStorage.getItem(key)) {\n      return undefined;\n    }\n\n    const updated = {...feature, ...delta};\n    localStorage.setItem(key, JSON.stringify(updated));\n    return updated;\n  }\n\n  private getKey(feature: Feature) {\n    return `audits/${feature.auditId}/features/${feature.typeId || 'preaudit'}`;\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {Observable} from 'rxjs';\nimport {mapTo} from 'rxjs/operators';\nimport {ParseObject} from '../parse/parse-object.interface';\nimport {ParseService} from '../parse/parse.service';\nimport {IdService} from './id.service';\nimport {Audit, CreateAuditDto, UpdateAuditDto} from './model/audit.interface';\n\n@Injectable()\nexport class ParseAuditService {\n\n  constructor(\n    private idService: IdService,\n    private parseService: ParseService,\n  ) {\n  }\n\n  findAll(filter: Partial<Audit> = {}): Observable<Audit[]> {\n    return this.parseService.findAll<Audit>(`rAudit`, filter);\n  }\n\n  create(dto: CreateAuditDto): Observable<Audit> {\n    const {id, mod} = this.idService.randomIdAndMod();\n    const audit: Omit<Audit, keyof ParseObject> = {\n      auditId: id.toString(),\n      mod: mod.toString(),\n      usn: 0,\n      ...dto,\n    };\n    return this.createFromLocal(audit);\n  }\n\n  createFromLocal(audit: Omit<Audit, keyof ParseObject>) {\n    return this.parseService.create<Audit>('rAudit', audit);\n  }\n\n  update(objectId: string, audit: UpdateAuditDto): Observable<void> {\n    return this.parseService.update('rAudit', objectId, audit).pipe(mapTo(undefined));\n  }\n\n  updateMany(objectId: string, updates: UpdateAuditDto[]): Observable<void> {\n    return this.parseService.batch(updates.map(update => ({\n      method: 'PUT',\n      path: `/classes/rAudit/${objectId}`,\n      body: update,\n    }))).pipe(mapTo(undefined));\n  }\n\n  delete({objectId}: Pick<Audit, 'objectId'>): Observable<void> {\n    return this.parseService.delete('rAudit', objectId);\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {Observable} from 'rxjs';\nimport {mapTo} from 'rxjs/operators';\nimport {ParseService} from '../parse/parse.service';\nimport {CreateFeatureDto, Feature} from './model/feature.interface';\n\n@Injectable()\nexport class ParseFeatureService {\n\n  constructor(\n    private parseService: ParseService,\n  ) {\n  }\n\n  findAll<K extends keyof Feature = keyof Feature>(filter: Partial<Feature> = {}, keys?: readonly K[]): Observable<Pick<Feature, K>[]> {\n    return this.parseService.findAll<Feature>('rFeature', filter, {keys});\n  }\n\n  create(feature: CreateFeatureDto): Observable<Feature> {\n    return this.parseService.create<Feature>('rFeature', feature);\n  }\n\n  update(objectId: string, feature: Partial<Feature>): Observable<void> {\n    return this.parseService.update('rFeature', objectId, feature).pipe(mapTo(undefined));\n  }\n\n  updateAll(filter: Partial<Feature>, update: Partial<Feature>) {\n    return this.parseService.updateAll('rFeature', filter, update);\n  }\n\n  delete(objectId: string): Observable<void> {\n    return this.parseService.delete('rFeature', objectId);\n  }\n\n  deleteAll(filter: Partial<Feature> = {}) {\n    return this.parseService.deleteAll('rFeature', filter);\n  }\n}\n","import {Component, OnInit} from '@angular/core';\nimport {ActivatedRoute} from '@angular/router';\nimport {of} from 'rxjs';\nimport {switchMap, tap} from 'rxjs/operators';\nimport {CompanycamCredentialService} from '../../companycam/companycam-credential.service';\nimport {CompanycamService} from '../../companycam/companycam.service';\nimport {Photo} from '../../companycam/model/photo';\nimport {Project} from '../../companycam/model/project';\nimport {AuditService} from '../audit.service';\nimport {Audit} from '../model/audit.interface';\n\n@Component({\n  selector: 'app-photos',\n  templateUrl: './photos.component.html',\n  styleUrls: ['./photos.component.scss'],\n})\nexport class PhotosComponent implements OnInit {\n  audit?: Audit;\n  project?: Project;\n  photos: Photo[] = [];\n\n  apiKey = true;\n\n  constructor(\n    private route: ActivatedRoute,\n    private auditService: AuditService,\n    private companycamService: CompanycamService,\n    private companycamCredentialService: CompanycamCredentialService,\n  ) {\n  }\n\n  ngOnInit(): void {\n    if (!this.companycamCredentialService.apiKey) {\n      this.apiKey = false;\n      return;\n    }\n\n    this.route.params.pipe(\n      switchMap(({aid}) => this.auditService.findOne(aid)),\n      tap(audit => this.audit = audit),\n      switchMap(audit => audit ? this.companycamService.getProjects(audit.name) : of([])),\n      tap(([project]) => this.project = project),\n      switchMap(([project]) => project ? this.companycamService.getPhotos(project.id) : []),\n    ).subscribe(photos => {\n      this.photos = photos;\n    });\n  }\n}\n","<div *ngIf=\"!apiKey\" class=\"alert alert-danger\">\n  CompanyCam API Key is not configured.\n  Please create or use an\n  <a href=\"https://app.companycam.com/access_tokens\" target=\"_blank\">access token</a>\n  and enter it in\n  <a routerLink=\"/settings\" fragment=\"companyCamApiKeyInput\">Settings</a>.\n</div>\n<div *ngIf=\"apiKey && !project\" class=\"alert alert-warning\">\n  Could not find project on CompanyCam with the same name as the audit <b>{{ audit?.name }}</b>.\n  Please check the spelling and wording and rename the audit, or\n  <a href=\"https://app.companycam.com/projects/new\">create a project</a>\n  if not yet done.\n</div>\n<div *ngIf=\"project\" class=\"mb-3\">\n  <a [href]=\"'ccam://camera/' + project.id | safe:'url'\" class=\"btn btn-primary me-2\" target=\"_blank\">\n    Capture Photo\n  </a>\n  <a [href]=\"'ccam://projects/' + project.id | safe:'url'\" class=\"btn btn-secondary me-2\" target=\"_blank\">\n    View in App\n  </a>\n  <a [href]=\"project.project_url\" class=\"btn btn-secondary me-2\" target=\"_blank\">\n    View in Browser\n  </a>\n</div>\n<ul class=\"list-group\">\n  <li *ngFor=\"let photo of photos\" class=\"list-group-item\">\n    <a [href]=\"photo.uris[1].url\" target=\"_blank\">\n      <img [src]=\"photo.uris[1].url\" [alt]=\"photo.id\" height=\"128\" class=\"float-end\">\n    </a>\n    <h4>{{ photo.creator_name }}</h4>\n    <div class=\"text-muted\">\n      {{ photo.captured_at * 1000 | date:'medium' }}\n    </div>\n    <a [href]=\"'ccam://photos/' + photo.id | safe:'url'\">Open in App</a>\n    <span class=\"text-muted\">\n      &bull;\n    </span>\n    <a [href]=\"photo.photo_url\" target=\"_blank\">Open in Browser</a>\n  </li>\n</ul>\n","import {Component, OnInit} from '@angular/core';\nimport {ToastService} from 'ng-bootstrap-ext';\nimport {forkJoin} from 'rxjs';\nimport {FormsService} from '../../forms/forms.service';\nimport {AuditService} from '../audit.service';\nimport {FeatureService} from '../feature.service';\nimport {Audit} from '../model/audit.interface';\nimport {OfflineAuditService} from '../offline-audit.service';\n\n@Component({\n  selector: 'app-pre-audit',\n  templateUrl: './pre-audit.component.html',\n  styleUrls: ['./pre-audit.component.scss'],\n})\nexport class PreAuditComponent implements OnInit {\n  audits: Audit[] = [];\n\n  constructor(\n    private auditService: AuditService,\n    private offlineAuditService: OfflineAuditService,\n    private featureService: FeatureService,\n    private formsService: FormsService,\n    private toastService: ToastService,\n  ) {\n  }\n\n  ngOnInit(): void {\n    this.auditService.findAll().subscribe(audits => {\n      this.audits = audits;\n    });\n  }\n\n  create(): void {\n    const name = prompt('New Audit Name');\n    if (!name) {\n      return;\n    }\n\n    this.auditService.create({\n      name,\n      type: {},\n      zone: {},\n    }).subscribe(audit => {\n      this.audits.push(audit);\n    }, error => {\n      this.toastService.error('Audit', 'Failed to create audit', error);\n    });\n  }\n\n  rename(audit: Audit) {\n    const name = prompt('Rename Audit', audit.name);\n    if (!name) {\n      return;\n    }\n    this.auditService.update(audit, {name}, a => {\n      a.name = name;\n      return a;\n    }).subscribe(undefined, error => {\n      this.toastService.error('Audit', 'Failed to rename audit', error);\n    });\n  }\n\n  delete(audit: Audit) {\n    if (!confirm(`Are you sure you want to delete '${audit.name}'?`)) {\n      return;\n    }\n    forkJoin([\n      this.auditService.delete(audit),\n      this.featureService.deleteAll({auditId: audit.auditId}),\n    ]).subscribe(() => {\n      const index1 = this.audits.indexOf(audit);\n      if (index1 >= 0) {\n        this.audits.splice(index1, 1);\n      }\n    }, error => {\n      this.toastService.error('Audit', 'Failed to delete audit', error);\n    });\n  }\n\n  download(audit: Audit) {\n    if (audit.pendingChanges && !confirm(`Are you sure you want to discard ${audit.pendingChanges} pending changes? This cannot be undone.`)) {\n      return;\n    }\n    this.formsService.loadSchemas().subscribe();\n    this.offlineAuditService.save(audit);\n    this.featureService.saveAll({auditId: audit.auditId});\n  }\n\n  upload(audit: Audit) {\n    forkJoin([\n      this.auditService.upload(audit),\n      this.featureService.upload({auditId: audit.auditId}),\n    ]).subscribe(undefined, error => {\n      this.toastService.error('Audit', 'Failed to upload audit', error);\n    });\n  }\n\n  deleteOffline(audit: Audit) {\n    const message = 'Are you sure you want to discard the offline copy' + (\n      audit.pendingChanges\n        ? ', including ' + audit.pendingChanges + ' pending changes? This cannot be undone.'\n        : '? This can be undone once an internet connection is available.'\n    );\n    if (!confirm(message)) {\n      return;\n    }\n    this.offlineAuditService.delete(audit);\n  }\n}\n","<app-master-detail>\n  <nav breadcrumb aria-label=\"breadcrumb\">\n    <ol class=\"breadcrumb p-3 bg-light bg-darkmode-dark\">\n      <li class=\"breadcrumb-item active\" aria-current=\"page\">Audits</li>\n    </ol>\n  </nav>\n  <div list class=\"list-group rounded-0\">\n    <button class=\"list-group-item list-group-item-action text-success\" (click)=\"create()\">\n      New Audit\n    </button>\n    <a *ngFor=\"let audit of audits\"\n       class=\"list-group-item list-group-item-action d-flex align-items-center\"\n       [routerLink]=\"[audit.auditId]\" routerLinkActive=\"active text-white\"\n    >\n      <div class=\"flex-grow-1\">\n        {{audit.name}}\n        <i *ngIf=\"audit.pendingChanges !== undefined\" class=\"bi-wifi-off\" ngbTooltip=\"Available Offline\"></i>\n      </div>\n      <app-options-dropdown class=\"visible-hover\" [id]=\"audit.auditId\">\n        <button ngbDropdownItem (click)=\"rename(audit)\">Rename</button>\n        <div class=\"dropdown-divider\"></div>\n        <ng-template\n          [ngIf]=\"audit.pendingChanges === undefined\"\n          [ngIfThen]=\"onlineOptions\"\n          [ngIfElse]=\"offlineOptions\"\n        ></ng-template>\n        <ng-template #onlineOptions>\n          <button ngbDropdownItem (click)=\"download(audit)\">\n            Download Offline Copy\n          </button>\n          <div class=\"dropdown-divider\"></div>\n          <button ngbDropdownItem class=\"text-danger\" (click)=\"delete(audit)\">Delete</button>\n        </ng-template>\n        <ng-template #offlineOptions>\n          <div class=\"dropdown-header\">\n            <i class=\"bi-wifi-off\"></i>\n            Pending Changes\n            <span class=\"badge bg-primary\">{{ audit.pendingChanges }}</span>\n          </div>\n          <button *ngIf=\"audit.pendingChanges\" ngbDropdownItem class=\"text-success\" (click)=\"upload(audit)\">\n            Upload\n          </button>\n          <button *ngIf=\"audit.pendingChanges\" ngbDropdownItem class=\"text-danger\" (click)=\"download(audit)\">\n            Discard\n          </button>\n          <button ngbDropdownItem class=\"text-danger\" (click)=\"deleteOffline(audit)\">\n            Remove Offline Copy\n          </button>\n        </ng-template>\n      </app-options-dropdown>\n    </a>\n  </div>\n</app-master-detail>\n","import {Component, OnInit} from '@angular/core';\nimport {ActivatedRoute} from '@angular/router';\nimport {forkJoin, of} from 'rxjs';\nimport {switchMap} from 'rxjs/operators';\nimport {AuditService} from '../audit.service';\nimport {Audit, Type, Zone} from '../model/audit.interface';\nimport {ApplianceType, Types} from '../model/types';\n\n@Component({\n  selector: 'app-pre-type',\n  templateUrl: './pre-type.component.html',\n  styleUrls: ['./pre-type.component.scss'],\n})\nexport class PreTypeComponent implements OnInit {\n  audit?: Audit;\n  zone?: Zone;\n  type?: ApplianceType;\n  types: Type[] = [];\n\n  constructor(\n    private route: ActivatedRoute,\n    private auditService: AuditService,\n  ) {\n  }\n\n  ngOnInit(): void {\n    this.route.params.pipe(\n      switchMap(({aid, zid, type}) => forkJoin([\n        this.auditService.findOne(aid),\n        of(zid),\n        of(type),\n      ])),\n    ).subscribe(([audit, zoneId, typeId]) => {\n      this.type = Types.find(t => t.name === typeId);\n      this.audit = audit;\n      this.zone = audit?.zone[zoneId];\n      this.types = audit ? Object.values(audit.type).filter(t => t.type === typeId && t.zoneId == zoneId) : [];\n    });\n  }\n}\n","<app-master-detail>\n  <nav breadcrumb aria-label=\"breadcrumb\">\n    <ol class=\"breadcrumb p-3 bg-light bg-darkmode-dark\">\n      <li class=\"breadcrumb-item\"><a routerLink=\"../../../..\">Audits</a></li>\n      <li class=\"breadcrumb-item\"><a routerLink=\"../../..\">{{audit?.name}}</a></li>\n      <li class=\"breadcrumb-item\"><a routerLink=\"../..\">Zones</a></li>\n      <li class=\"breadcrumb-item\"><a routerLink=\"..\">{{zone?.name}}</a></li>\n      <li class=\"breadcrumb-item active\" aria-current=\"page\">{{type?.name}}</li>\n    </ol>\n  </nav>\n  <app-type-list list *ngIf=\"type && audit && zone && types\"\n                 [audit]=\"audit\" [zone]=\"zone\" [types]=\"types\" [type]=\"type\"></app-type-list>\n</app-master-detail>\n","import {Component, OnInit} from '@angular/core';\nimport {ActivatedRoute} from '@angular/router';\nimport {switchMap} from 'rxjs/operators';\nimport {AuditService} from '../audit.service';\nimport {Audit} from '../model/audit.interface';\n\n@Component({\n  selector: 'app-pre-zone',\n  templateUrl: './pre-zone.component.html',\n  styleUrls: ['./pre-zone.component.scss'],\n})\nexport class PreZoneComponent implements OnInit {\n  audit?: Audit;\n\n  constructor(\n    private route: ActivatedRoute,\n    private auditService: AuditService,\n  ) {\n  }\n\n  ngOnInit(): void {\n    this.route.params.pipe(\n      switchMap(({aid}) => this.auditService.findOne(aid)),\n    ).subscribe(audit => {\n      this.audit = audit;\n    });\n  }\n}\n","<app-master-detail>\n  <nav breadcrumb aria-label=\"breadcrumb\">\n    <ol class=\"breadcrumb p-3 bg-light bg-darkmode-dark\">\n      <li class=\"breadcrumb-item\"><a routerLink=\"../..\">Audits</a></li>\n      <li class=\"breadcrumb-item\"><a routerLink=\"..\">{{audit?.name}}</a></li>\n      <li class=\"breadcrumb-item active\" aria-current=\"page\">Zones</li>\n    </ol>\n  </nav>\n  <app-zone-list list *ngIf=\"audit\" [audit]=\"audit\"></app-zone-list>\n</app-master-detail>\n","import {Component, Input} from '@angular/core';\nimport {ToastService} from 'ng-bootstrap-ext';\nimport {forkJoin} from 'rxjs';\nimport {AuditService} from '../audit.service';\nimport {FeatureService} from '../feature.service';\nimport {Audit, Type, Zone} from '../model/audit.interface';\nimport {ApplianceType} from '../model/types';\nimport {TypeService} from '../type.service';\n\n@Component({\n  selector: 'app-type-list',\n  templateUrl: './type-list.component.html',\n  styleUrls: ['./type-list.component.scss'],\n})\nexport class TypeListComponent {\n  @Input() audit!: Audit;\n  @Input() zone!: Zone;\n  @Input() types!: Type[];\n  @Input() type!: ApplianceType;\n  @Input() routerPrefix = '';\n\n  constructor(\n    private auditService: AuditService,\n    private typeService: TypeService,\n    private featureService: FeatureService,\n    private toastService: ToastService,\n  ) {\n  }\n\n  createType(type: ApplianceType, subType?: ApplianceType) {\n    const typeOrSubType = subType?.name ?? type.name;\n    const name = prompt(`New ${typeOrSubType} Name`);\n    if (!name) {\n      return;\n    }\n    this.typeService.create(this.audit, this.zone, {\n      type: type.name,\n      subtype: subType?.name ?? null,\n      name,\n    }).subscribe(type => {\n      this.types.push(type);\n    }, error => {\n      this.toastService.error(typeOrSubType, `Failed to create ${typeOrSubType}`, error);\n    });\n  }\n\n  rename(type: Type) {\n    const name = prompt('Rename Type', type.name);\n    if (!name) {\n      return;\n    }\n    this.typeService.update(this.audit, type.id, {name}).subscribe(undefined, error => {\n      this.toastService.error('Type', 'Failed to rename type', error);\n    });\n  }\n\n  delete(type: Type) {\n    if (!confirm(`Are you sure you want to delete '${type.name}'?`)) {\n      return;\n    }\n    forkJoin([\n      this.typeService.delete(this.audit, type.zoneId, type.id),\n      this.featureService.deleteAll({typeId: type.id.toString()}),\n    ]).subscribe(() => {\n      const index = this.types.indexOf(type);\n      if (index >= 0) {\n        this.types.splice(index, 1);\n      }\n    }, error => {\n      this.toastService.error('Type', 'Failed to delete type', error);\n    });\n  }\n}\n","<div class=\"list-group rounded-0\">\n  <button *ngIf=\"!type.subTypes\"\n          class=\"list-group-item list-group-item-action text-success\" (click)=\"createType(type)\">\n    New {{ type.name }}\n  </button>\n  <details *ngIf=\"type.subTypes\" class=\"list-group-item text-success\">\n    <summary>New</summary>\n    <button *ngFor=\"let subType of type.subTypes\" class=\"btn btn-sm btn-link text-success\"\n            (click)=\"createType(type, subType)\">\n      {{ subType.name }}\n    </button>\n  </details>\n  <a *ngFor=\"let item of types\"\n     class=\"list-group-item list-group-item-action d-flex align-items-center\"\n     [routerLink]=\"[routerPrefix + item.id]\"\n     routerLinkActive=\"active text-white\"\n  >\n    <div class=\"flex-grow-1\">\n      {{item.name}}\n      <small class=\"text-muted\">{{item.subtype}}</small>\n    </div>\n    <app-options-dropdown class=\"visible-hover\">\n      <button ngbDropdownItem (click)=\"rename(item)\">Rename</button>\n      <ng-container *ngIf=\"audit.pendingChanges === undefined\">\n        <div class=\"dropdown-divider\"></div>\n        <button ngbDropdownItem class=\"text-danger\" (click)=\"delete(item)\">Delete</button>\n      </ng-container>\n    </app-options-dropdown>\n  </a>\n</div>\n","import {Injectable} from '@angular/core';\nimport {Observable} from 'rxjs';\nimport {mapTo} from 'rxjs/operators';\nimport {AuditService} from './audit.service';\nimport {IdService} from './id.service';\nimport {Audit, CreateAuditDto, Type, Zone} from './model/audit.interface';\n\n@Injectable()\nexport class TypeService {\n\n  constructor(\n    private idService: IdService,\n    private auditService: AuditService,\n  ) {\n  }\n\n  create(audit: Audit, zone: Zone, dto: Omit<Type, 'id' | 'mod' | 'usn' | 'zoneId'>): Observable<Type> {\n    const {id, mod} = this.idService.randomIdAndMod();\n    const type: Type = {\n      id,\n      mod,\n      usn: 0,\n      zoneId: zone.id,\n      ...dto,\n    };\n    return this.auditService.update(audit, {\n      [`type.${id}`]: type,\n      [`zone.${zone.id}.typeId`]: {__op: 'AddUnique', 'objects': [id]},\n    }, audit => {\n      audit.type[id] = type;\n      zone.typeId.push(id);\n      return audit;\n    }).pipe(mapTo(type));\n  }\n\n  update(audit: Audit, typeId: Type['id'], update: Partial<Type>): Observable<Audit> {\n    const updateAudit: any = {};\n    for (const [key, value] of Object.entries(update)) {\n      updateAudit[`type.${typeId}.${key}`] = value;\n    }\n    return this.auditService.update(audit, updateAudit, audit => {\n      Object.assign(audit.type[typeId], update);\n      return audit;\n    });\n  }\n\n  delete(audit: Audit, zoneId: Type['zoneId'], typeId: Type['id']): Observable<Audit> {\n    return this.auditService.update(audit, {\n      [`type.${typeId}`]: {__op: 'Delete'},\n      [`zone.${zoneId}.typeId`]: {__op: 'Remove', objects: [typeId]},\n    }, audit => {\n      delete audit.type[typeId];\n      const zone = audit.zone[zoneId];\n      const index = zone.typeId.indexOf(typeId);\n      if (index >= 0) {\n        zone.typeId.splice(index, 1);\n      }\n      return audit;\n    });\n  }\n}\n","import {Component, OnInit, ViewChild} from '@angular/core';\nimport {ActivatedRoute} from '@angular/router';\nimport {ToastService} from 'ng-bootstrap-ext';\nimport {forkJoin, Observable, of} from 'rxjs';\nimport {switchMap} from 'rxjs/operators';\nimport {FormComponent} from '../../forms/form/form.component';\nimport {Schema} from '../../forms/forms.interface';\nimport {SaveableChangesComponent} from '../../unsaved-changes.guard';\nimport {AuditService} from '../audit.service';\nimport {FeatureService} from '../feature.service';\nimport {Audit, Type} from '../model/audit.interface';\nimport {Feature, FeatureData} from '../model/feature.interface';\nimport {Types} from '../model/types';\n\n@Component({\n  selector: 'app-type',\n  templateUrl: './type.component.html',\n  styleUrls: ['./type.component.scss'],\n})\nexport class TypeComponent implements OnInit, SaveableChangesComponent {\n  @ViewChild('form', {static: false}) form?: FormComponent;\n\n  feature?: Feature;\n  audit?: Audit;\n  type?: Type;\n  data?: FeatureData;\n  schemaId?: string;\n\n  constructor(\n    private auditService: AuditService,\n    private featureService: FeatureService,\n    private toastService: ToastService,\n    private route: ActivatedRoute,\n  ) {\n  }\n\n  ngOnInit(): void {\n    this.route.params.pipe(\n      switchMap(({aid, zid, tid}) => forkJoin([\n        of(tid),\n        this.auditService.findOne(aid),\n        this.featureService.findAll({\n          belongsTo: 'type',\n          auditId: aid,\n          zoneId: zid,\n          typeId: tid,\n        }),\n      ])),\n    ).subscribe(([typeId, audit, features]) => {\n      this.audit = audit;\n      const type = audit?.type[typeId];\n      this.type = type;\n      this.schemaId = this.getSchemaId(type);\n\n      this.feature = features[0];\n      this.data = this.feature ? this.featureService.feature2Data(this.feature) : {};\n    });\n  }\n\n  private getSchemaId(type: Type | undefined) {\n    if (!type) {\n      return undefined;\n    }\n\n    const type1 = Types.find(t => t.name === type.type);\n    if (!type1) {\n      return undefined;\n    }\n    if (!type.subtype || !type1.subTypes) {\n      return type1.id;\n    }\n\n    const type2 = type1.subTypes.find(t => t.name === type.subtype);\n    return type2?.id;\n  }\n\n  isSaved(): boolean {\n    return !this.form?.dirty;\n  }\n\n  save(schema: Schema, data: object) {\n    if (!this.audit) {\n      return;\n    }\n\n    let op: Observable<Feature>;\n    if (this.feature) {\n      const update = this.featureService.data2Feature(schema, data);\n      op = this.featureService.update(this.feature, update);\n    } else {\n      const feature = this.featureService.data2Feature(schema, data);\n      const {aid, zid, tid} = this.route.snapshot.params;\n      const {ACL} = this.audit;\n      op = this.featureService.create({\n        auditId: aid,\n        zoneId: zid,\n        typeId: tid,\n        belongsTo: 'type',\n        mod: new Date().valueOf().toString(),\n        usn: 0,\n        ACL,\n        ...feature,\n      });\n    }\n\n    op.subscribe(feature => {\n      this.feature = feature;\n      this.toastService.success('Form', 'Successfully saved form input');\n    }, error => {\n      this.toastService.error('Form', 'Failed to save form input', error);\n    });\n  }\n}\n","<div class=\"container\">\n  <h1>\n    <a class=\"bi-chevron-left d-lg-none\" routerLink=\"..\"></a>\n    {{ type?.name }}\n    <span class=\"text-muted small\">\n      {{ type?.subtype }}\n    </span>\n  </h1>\n\n  <app-form #form *ngIf=\"data && schemaId\" [data]=\"data\" [schemaId]=\"schemaId\" (saved)=\"save($event[0], $event[1])\"></app-form>\n</div>\n","import {Component, Input} from '@angular/core';\nimport {ToastService} from 'ng-bootstrap-ext';\nimport {forkJoin} from 'rxjs';\nimport {AuditService} from '../audit.service';\nimport {FeatureService} from '../feature.service';\nimport {Audit, Zone} from '../model/audit.interface';\nimport {ZoneService} from '../zone.service';\n\n@Component({\n  selector: 'app-zone-list',\n  templateUrl: './zone-list.component.html',\n  styleUrls: ['./zone-list.component.scss'],\n})\nexport class ZoneListComponent {\n  @Input() audit!: Audit;\n  @Input() routerPrefix = '';\n\n  constructor(\n    private auditService: AuditService,\n    private zoneService: ZoneService,\n    private featureService: FeatureService,\n    private toastService: ToastService,\n  ) {\n  }\n\n  createZone() {\n    const name = prompt('New Zone Name');\n    if (!name) {\n      return;\n    }\n\n    this.zoneService.create(this.audit, {name}).subscribe(zone => {\n      this.audit.zone[zone.id] = zone;\n    }, error => {\n      this.toastService.error('Zone', 'Failed to create zone', error);\n    });\n  }\n\n  rename(zone: Zone) {\n    const name = prompt('Rename Zone', zone.name);\n    if (!name) {\n      return;\n    }\n    this.zoneService.update(this.audit, zone.id, {name}).subscribe(() => {\n      zone.name = name;\n    }, error => {\n      this.toastService.error('Zone', 'Failed to rename zone', error);\n    });\n  }\n\n  delete(zone: Zone) {\n    if (!confirm(`Are you sure you want to delete '${zone.name}'?`)) {\n      return;\n    }\n    forkJoin([\n      this.zoneService.delete(this.audit, zone),\n      this.featureService.deleteAll({zoneId: zone.id.toString()}),\n    ]).subscribe(undefined, error => {\n      this.toastService.error('Zone', 'Failed to delete zone', error);\n    });\n  }\n}\n","<div class=\"list-group rounded-0\">\n  <button class=\"list-group-item list-group-item-action text-success\" (click)=\"createZone()\">\n    New Zone\n  </button>\n  <a *ngFor=\"let keyValue of audit.zone | keyvalue\"\n     class=\"list-group-item list-group-item-action d-flex align-items-center\"\n     [routerLink]=\"[routerPrefix + keyValue.value.id]\" routerLinkActive=\"active\"\n  >\n    <div class=\"flex-grow-1\">\n      {{keyValue.value.name}}\n    </div>\n    <app-options-dropdown class=\"visible-hover\">\n      <button ngbDropdownItem (click)=\"rename(keyValue.value)\">Rename</button>\n      <ng-container *ngIf=\"audit.pendingChanges === undefined\">\n        <div class=\"dropdown-divider\"></div>\n        <button ngbDropdownItem class=\"text-danger\" (click)=\"delete(keyValue.value)\">Delete</button>\n      </ng-container>\n    </app-options-dropdown>\n  </a>\n</div>\n","import {Injectable} from '@angular/core';\nimport {Observable} from 'rxjs';\nimport {mapTo} from 'rxjs/operators';\nimport {AuditService} from './audit.service';\nimport {IdService} from './id.service';\nimport {Audit, Zone} from './model/audit.interface';\n\n@Injectable()\nexport class ZoneService {\n\n  constructor(\n    private idService: IdService,\n    private auditService: AuditService,\n  ) {\n  }\n\n  create(audit: Audit, dto: Partial<Zone>): Observable<Zone> {\n    const {id, mod} = this.idService.randomIdAndMod();\n    const zone: Zone = {\n      id,\n      mod,\n      usn: 0,\n      name: '',\n      typeId: [],\n      ...dto,\n    };\n    return this.auditService.update(audit, {[`zone.${id}`]: zone}, audit => {\n      audit.zone[id] = zone;\n      return audit;\n    }).pipe(\n      mapTo(zone),\n    );\n  }\n\n  update(audit: Audit, zoneId: Zone['id'], update: Partial<Zone>): Observable<Audit> {\n    const updateAudit: any = {};\n    for (const [key, value] of Object.entries(update)) {\n      updateAudit[`zone.${zoneId}.${key}`] = value;\n    }\n    return this.auditService.update(audit, updateAudit, audit => {\n      Object.assign(audit.zone[zoneId], update);\n      return audit;\n    });\n  }\n\n  delete(audit: Audit, {id, typeId}: Pick<Zone, 'id' | 'typeId'>): Observable<Audit> {\n    const update = {\n      [`zone.${id}`]: {__op: 'Delete'},\n    };\n    for (const id of typeId) {\n      update[`type.${id}`] = {__op: 'Delete'};\n    }\n    return this.auditService.update(audit, update, audit => {\n      delete audit.zone[id];\n      for (const tid of typeId) {\n        delete audit.type[tid];\n      }\n      return audit;\n    });\n  }\n}\n","import {Component, OnInit} from '@angular/core';\nimport {ActivatedRoute} from '@angular/router';\nimport {forkJoin, of} from 'rxjs';\nimport {switchMap} from 'rxjs/operators';\nimport {AuditService} from '../audit.service';\nimport {Audit, Type, Zone} from '../model/audit.interface';\nimport {Types} from '../model/types';\n\n@Component({\n  selector: 'app-zone',\n  templateUrl: './zone.component.html',\n  styleUrls: ['./zone.component.scss'],\n})\nexport class ZoneComponent implements OnInit {\n  audit?: Audit;\n  types = Types;\n  groupedTypes: { [type: string]: Type[]; } = {};\n  selectedZone?: Zone;\n\n  activeTab?: string;\n\n  constructor(\n    private auditService: AuditService,\n    private route: ActivatedRoute,\n  ) {\n  }\n\n  ngOnInit(): void {\n    this.route.params.pipe(\n      switchMap(({aid, zid}) => forkJoin([\n        this.auditService.findOne(aid),\n        of(zid),\n      ])),\n    ).subscribe(([audit, zoneId]) => {\n      this.audit = audit;\n\n      const zone = audit?.zone[zoneId];\n      this.selectedZone = zone;\n\n      const types = audit && zone ? zone.typeId.map(tid => audit.type[tid]) : [];\n      for (const type of Types) {\n        this.groupedTypes[type.name] = [];\n      }\n      for (const type of types) {\n        this.groupedTypes[type.type].push(type);\n      }\n    });\n  }\n}\n","<div class=\"container\">\n  <h1>\n    <a class=\"bi-chevron-left d-lg-none\" routerLink=\"..\"></a>\n    {{ selectedZone?.name }}\n  </h1>\n\n  <ul ngbNav #nav=\"ngbNav\" [(activeId)]=\"activeTab\" class=\"nav-tabs\">\n    <li *ngFor=\"let type of types\"\n        [ngbNavItem]=\"type.name\">\n      <a ngbNavLink>{{type.name}}</a>\n      <ng-template ngbNavContent>\n        <app-type-list\n          *ngIf=\"audit && selectedZone\"\n          [types]=\"groupedTypes[type.name]\"\n          [audit]=\"audit\"\n          [zone]=\"selectedZone\"\n          [type]=\"type\"\n          [routerPrefix]=\"type.name + '/'\"\n        ></app-type-list>\n      </ng-template>\n    </li>\n  </ul>\n  <div [ngbNavOutlet]=\"nav\" class=\"mt-2\"></div>\n</div>\n","import {Pipe, PipeTransform} from '@angular/core';\n\n@Pipe({\n  name: 'formInputType',\n})\nexport class FormInputTypePipe implements PipeTransform {\n  static readonly mapping: Record<string, string> = {\n    emailrow: 'email',\n    phonerow: 'tel',\n    introw: 'number',\n    decimalrow: 'number',\n  };\n\n  transform(value: string): string {\n    return FormInputTypePipe.mapping[value] || 'text';\n  }\n}\n","import {Component, EventEmitter, Input, OnDestroy, OnInit, Output} from '@angular/core';\nimport {BehaviorSubject, of} from 'rxjs';\nimport {distinctUntilChanged, switchMap} from 'rxjs/operators';\nimport {Schema} from '../forms.interface';\nimport {FormsService} from '../forms.service';\n\n@Component({\n  selector: 'app-form',\n  templateUrl: './form.component.html',\n  styleUrls: ['./form.component.scss'],\n})\nexport class FormComponent implements OnInit, OnDestroy {\n  #schemaId = new BehaviorSubject<string | undefined>(undefined);\n\n  @Input() schema?: Schema;\n\n  @Input() data: Record<string, string> = {};\n  @Output() saved = new EventEmitter<[Schema, object]>();\n\n  dirty = false;\n\n  constructor(\n    private formsService: FormsService,\n  ) {\n  }\n\n  @Input()\n  set schemaId(id: string) {\n    this.#schemaId.next(id);\n  }\n\n  ngOnInit(): void {\n    this.#schemaId.pipe(\n      distinctUntilChanged(),\n      switchMap(id => id ? this.formsService.loadSchema(id) : of(undefined)),\n    ).subscribe(schema => {\n      this.schema = schema;\n    });\n  }\n\n  ngOnDestroy() {\n    this.#schemaId.complete();\n  }\n\n  save(): void {\n    if (this.schema) {\n      this.saved.emit([this.schema, this.data]);\n    }\n    this.dirty = false;\n  }\n\n  setDirty() {\n    this.dirty = true;\n  }\n\n  canDeactivate(): boolean {\n    return !this.dirty;\n  }\n}\n","<ngb-accordion [closeOthers]=\"true\">\n  <ngb-panel *ngFor=\"let section of schema?.geminiForm || []\" [id]=\"'s-' + section.id\" [title]=\"section.section\">\n    <ng-template ngbPanelContent>\n      <div *ngFor=\"let element of section.elements\" class=\"mb-3\">\n        <label for=\"{{section.id}}-{{element.id}}\" class=\"form-label\">{{element.param}}</label>\n        <ng-container [ngSwitch]=\"element.dataType\">\n          <select *ngSwitchCase=\"'pickerinputrow'\" [(ngModel)]=\"data[element.id]\" (change)=\"setDirty()\"\n                  class=\"form-select\"\n                  id=\"{{section.id}}-{{element.id}}\" [attr.aria-describedby]=\"section.id + '-' + element.id + '-help'\">\n            <option *ngFor=\"let value of element.defaultValues.split(',')\"\n                    [value]=\"value.substring(value.indexOf(':') + 1)\">\n              {{value.substring(value.indexOf(':') + 1)}}\n            </option>\n          </select>\n          <textarea *ngSwitchCase=\"'textarearow'\" [(ngModel)]=\"data[element.id]\" (change)=\"setDirty()\"\n                    class=\"form-control\"\n                    id=\"{{section.id}}-{{element.id}}\"\n                    [attr.aria-describedby]=\"section.id + '-' + element.id + '-help'\"></textarea>\n          <input *ngSwitchDefault [(ngModel)]=\"data[element.id]\" (change)=\"setDirty()\"\n                 [type]=\"element.dataType | formInputType\" class=\"form-control\"\n                 id=\"{{section.id}}-{{element.id}}\" [attr.aria-describedby]=\"section.id + '-' + element.id + '-help'\">\n        </ng-container>\n        <div id=\"{{section.id}}-{{element.id}}-help\" class=\"form-text\">{{element.hint}}</div>\n      </div>\n    </ng-template>\n  </ngb-panel>\n</ngb-accordion>\n<p class=\"text-center text-muted mt-3 mb-5\">\n  Don't forget to save when you're done filling out the form!\n</p>\n<button type=\"button\" class=\"btn btn-primary btn-lg btn-floating-action\" (click)=\"save()\">\n  Save\n</button>\n","import {CommonModule} from '@angular/common';\nimport {HttpClientModule} from '@angular/common/http';\nimport {NgModule} from '@angular/core';\nimport {FormsModule as NgFormsModule} from '@angular/forms';\nimport {NgbAccordionModule} from '@ng-bootstrap/ng-bootstrap';\nimport {FormInputTypePipe} from './form-input-type.pipe';\nimport {FormComponent} from './form/form.component';\n\n@NgModule({\n  declarations: [\n    FormComponent,\n    FormInputTypePipe,\n  ],\n  exports: [\n    FormComponent,\n  ],\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    NgFormsModule,\n    NgbAccordionModule,\n  ],\n})\nexport class FormsModule {\n}\n","import {HttpClient} from '@angular/common/http';\nimport {Injectable} from '@angular/core';\nimport {Observable, of} from 'rxjs';\nimport {catchError, map, tap} from 'rxjs/operators';\nimport {ParseService} from '../parse/parse.service';\nimport {Schema} from './forms.interface';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class FormsService {\n\n  constructor(\n    private http: HttpClient,\n    private parseService: ParseService,\n  ) {\n  }\n\n  loadSchemas(): Observable<Schema[]> {\n    return this.parseService.findAll<Schema>('Form').pipe(tap(schemas => {\n      for (let schema of schemas) {\n        this.saveLocal(schema);\n      }\n    }));\n  }\n\n  loadSchema(name: string): Observable<Schema | undefined> {\n    return this.parseService.findAll<Schema>('Form', {name}, {\n      limit: 1,\n      order: ['-updatedAt'],\n    }).pipe(\n      map(schemas => {\n        if (schemas.length === 0) {\n          return undefined;\n        } else {\n          const schema = schemas[0];\n          this.saveLocal(schema);\n          return schema;\n        }\n      }),\n      catchError(() => of(this.getLocal(name))),\n    );\n  }\n\n  private getLocal(name: string): Schema | undefined {\n    const local = localStorage.getItem(`schemas/${name}`);\n    return local ? JSON.parse(local) : undefined;\n  }\n\n  private saveLocal(schema: Schema) {\n    const {name, updatedAt} = schema;\n    const updatedLocal = localStorage.getItem(`schemas/${name}/updatedAt`);\n    if (!updatedLocal || updatedLocal < updatedAt) {\n      localStorage.setItem(`schemas/${name}`, JSON.stringify(schema));\n      localStorage.setItem(`schemas/${name}/updatedAt`, updatedAt);\n    }\n  }\n}\n","import {Component} from '@angular/core';\n\n@Component({\n  selector: 'app-master-detail',\n  templateUrl: './master-detail.component.html',\n  styleUrls: ['./master-detail.component.scss'],\n})\nexport class MasterDetailComponent {\n}\n","<div class=\"row no-gutters h-100\">\n  <div class=\"col-lg-3 h-100 overflow-auto master\" routerLinkActive=\"master-active\" [routerLinkActiveOptions]=\"{exact: true}\">\n    <a class=\"d-none\" routerLink=\".\"></a>\n    <ng-content select=\"[breadcrumb]\"></ng-content>\n    <ng-content select=\"[list]\"></ng-content>\n  </div>\n  <div class=\"col-lg-9 h-100 overflow-auto detail\">\n    <router-outlet></router-outlet>\n  </div>\n</div>\n","import {Component, Input} from '@angular/core';\n\n@Component({\n  selector: 'app-options-dropdown',\n  templateUrl: './options-dropdown.component.html',\n  styleUrls: ['./options-dropdown.component.scss'],\n})\nexport class OptionsDropdownComponent {\n  @Input() id!: string;\n}\n","<div ngbDropdown placement=\"bottom-right\" container=\"body\" (click)=\"$event.stopPropagation(); $event.preventDefault()\">\n  <button class=\"btn btn-secondary btn-sm\" id=\"actions-dropdown-{{ id }}\" ngbDropdownToggle>\n    Options\n  </button>\n  <div ngbDropdownMenu [attr.aria-labelledby]=\"'actions-dropdown-' + id\">\n    <ng-content></ng-content>\n  </div>\n</div>\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {DomSanitizer, SafeHtml, SafeResourceUrl, SafeScript, SafeStyle, SafeUrl} from '@angular/platform-browser';\n\n@Pipe({\n  name: 'safe',\n})\nexport class SafePipe implements PipeTransform {\n\n  constructor(\n    private readonly sanitizer: DomSanitizer,\n  ) {\n  }\n\n  transform(value: string, type: 'html'): SafeHtml;\n  transform(value: string, type: 'style'): SafeStyle;\n  transform(value: string, type: 'script'): SafeScript;\n  transform(value: string, type: 'url'): SafeUrl;\n  transform(value: string, type: 'resourceUrl'): SafeResourceUrl;\n  transform(value: string, type: string): SafeHtml | SafeStyle | SafeScript | SafeUrl | SafeResourceUrl {\n    switch (type) {\n      case 'html':\n        return this.sanitizer.bypassSecurityTrustHtml(value);\n      case 'style':\n        return this.sanitizer.bypassSecurityTrustStyle(value);\n      case 'script':\n        return this.sanitizer.bypassSecurityTrustScript(value);\n      case 'url':\n        return this.sanitizer.bypassSecurityTrustUrl(value);\n      case 'resourceUrl':\n        return this.sanitizer.bypassSecurityTrustResourceUrl(value);\n      default:\n        throw new Error(`Invalid safe type: ${type}`);\n    }\n  }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {RouterModule} from '@angular/router';\nimport {NgbDropdownModule} from '@ng-bootstrap/ng-bootstrap';\nimport {MasterDetailComponent} from './master-detail/master-detail.component';\nimport {OptionsDropdownComponent} from './options-dropdown/options-dropdown.component';\nimport {SafePipe} from './safe.pipe';\n\n\n@NgModule({\n  declarations: [\n    MasterDetailComponent,\n    OptionsDropdownComponent,\n    SafePipe,\n  ],\n  imports: [\n    CommonModule,\n    RouterModule,\n    NgbDropdownModule,\n  ],\n  exports: [\n    MasterDetailComponent,\n    OptionsDropdownComponent,\n    SafePipe,\n  ],\n})\nexport class SharedModule {\n}\n","import {Injectable} from '@angular/core';\nimport {CanDeactivate} from '@angular/router';\nimport {Observable} from 'rxjs';\n\nexport interface SaveableChangesComponent {\n  isSaved(): boolean | Observable<boolean> | Promise<boolean>;\n}\n\n@Injectable({ providedIn: 'root' })\nexport class UnsavedChangesGuard implements CanDeactivate<SaveableChangesComponent> {\n  canDeactivate(component: SaveableChangesComponent): Observable<boolean> | Promise<boolean> | boolean {\n    return component.isSaved() || confirm('Are you sure you want to leave this page? Changes that you made may not be saved.');\n  }\n}\n","import { asyncScheduler } from '../scheduler/async';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function debounceTime(dueTime, scheduler = asyncScheduler) {\n    return operate((source, subscriber) => {\n        let activeTask = null;\n        let lastValue = null;\n        let lastTime = null;\n        const emit = () => {\n            if (activeTask) {\n                activeTask.unsubscribe();\n                activeTask = null;\n                const value = lastValue;\n                lastValue = null;\n                subscriber.next(value);\n            }\n        };\n        function emitWhenIdle() {\n            const targetTime = lastTime + dueTime;\n            const now = scheduler.now();\n            if (now < targetTime) {\n                activeTask = this.schedule(undefined, targetTime - now);\n                subscriber.add(activeTask);\n                return;\n            }\n            emit();\n        }\n        source.subscribe(createOperatorSubscriber(subscriber, (value) => {\n            lastValue = value;\n            lastTime = scheduler.now();\n            if (!activeTask) {\n                activeTask = scheduler.schedule(emitWhenIdle, dueTime);\n                subscriber.add(activeTask);\n            }\n        }, () => {\n            emit();\n            subscriber.complete();\n        }, undefined, () => {\n            lastValue = activeTask = null;\n        }));\n    });\n}\n"],"names":["asyncScheduler","operate","createOperatorSubscriber","debounceTime","dueTime","scheduler","source","subscriber","activeTask","lastValue","lastTime","emit","unsubscribe","value","next","emitWhenIdle","targetTime","now","schedule","undefined","add","subscribe","complete"],"sourceRoot":"webpack:///"}